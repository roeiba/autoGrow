# Tasks API Documentation

> **Generated by AI from PROJECT_BRIEF.md**
> Version: 1.0.0

## Overview

The Tasks API provides endpoints for managing tasks in the TaskFlow application. All endpoints require authentication unless otherwise noted.

## Base URL

```
Development: http://localhost:3000/api/v1
Production:  https://api.taskflow.com/api/v1
```

## Authentication

All API requests must include a JWT token in the Authorization header:

```
Authorization: Bearer <your_jwt_token>
```

## Endpoints

### Create Task

Create a new task in a project.

**Endpoint**: `POST /tasks`

**Request Body**:
```json
{
  "title": "string (required, 1-200 chars)",
  "description": "string (optional, max 5000 chars)",
  "status": "enum (optional, default: TODO)",
  "priority": "enum (optional, default: MEDIUM)",
  "projectId": "uuid (required)",
  "assigneeId": "uuid (optional)",
  "dueDate": "ISO 8601 date (optional)",
  "estimatedHours": "integer (optional, 1-1000)"
}
```

**Status Values**: `BACKLOG`, `TODO`, `IN_PROGRESS`, `REVIEW`, `DONE`

**Priority Values**: `LOW`, `MEDIUM`, `HIGH`, `URGENT`

**Response**: `201 Created`
```json
{
  "id": "uuid",
  "title": "string",
  "description": "string",
  "status": "enum",
  "priority": "enum",
  "projectId": "uuid",
  "assigneeId": "uuid",
  "creatorId": "uuid",
  "dueDate": "ISO 8601",
  "estimatedHours": "integer",
  "createdAt": "ISO 8601",
  "updatedAt": "ISO 8601",
  "assignee": {
    "id": "uuid",
    "name": "string",
    "email": "string",
    "avatarUrl": "string"
  },
  "creator": {
    "id": "uuid",
    "name": "string",
    "email": "string",
    "avatarUrl": "string"
  }
}
```

**Example**:
```bash
curl -X POST https://api.taskflow.com/api/v1/tasks \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Implement user authentication",
    "description": "Add JWT-based authentication with OAuth support",
    "priority": "HIGH",
    "status": "TODO",
    "projectId": "550e8400-e29b-41d4-a716-446655440000",
    "dueDate": "2024-02-15T23:59:59Z",
    "estimatedHours": 8
  }'
```

**Error Responses**:
- `400 Bad Request`: Invalid input data
- `401 Unauthorized`: Missing or invalid token
- `403 Forbidden`: No permission to create tasks in project
- `404 Not Found`: Project not found

---

### Get Task

Retrieve a single task by ID.

**Endpoint**: `GET /tasks/:id`

**Response**: `200 OK`
```json
{
  "id": "uuid",
  "title": "string",
  "description": "string",
  "status": "enum",
  "priority": "enum",
  "projectId": "uuid",
  "assigneeId": "uuid",
  "creatorId": "uuid",
  "dueDate": "ISO 8601",
  "estimatedHours": "integer",
  "createdAt": "ISO 8601",
  "updatedAt": "ISO 8601",
  "project": {
    "id": "uuid",
    "name": "string"
  },
  "assignee": { ... },
  "creator": { ... },
  "comments": [
    {
      "id": "uuid",
      "content": "string",
      "userId": "uuid",
      "createdAt": "ISO 8601",
      "user": { ... }
    }
  ]
}
```

**Example**:
```bash
curl https://api.taskflow.com/api/v1/tasks/550e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**Error Responses**:
- `401 Unauthorized`: Missing or invalid token
- `403 Forbidden`: No permission to view task
- `404 Not Found`: Task not found

---

### Update Task

Update an existing task.

**Endpoint**: `PATCH /tasks/:id`

**Request Body** (all fields optional):
```json
{
  "title": "string",
  "description": "string",
  "status": "enum",
  "priority": "enum",
  "assigneeId": "uuid",
  "dueDate": "ISO 8601",
  "estimatedHours": "integer"
}
```

**Response**: `200 OK`
```json
{
  "id": "uuid",
  "title": "string",
  ... (full task object)
}
```

**Example**:
```bash
curl -X PATCH https://api.taskflow.com/api/v1/tasks/550e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "status": "IN_PROGRESS",
    "assigneeId": "660e8400-e29b-41d4-a716-446655440001"
  }'
```

**Error Responses**:
- `400 Bad Request`: Invalid input data
- `401 Unauthorized`: Missing or invalid token
- `403 Forbidden`: No permission to update task
- `404 Not Found`: Task not found

---

### List Tasks

Get all tasks for a project with optional filtering.

**Endpoint**: `GET /projects/:projectId/tasks`

**Query Parameters**:
- `status` (optional): Filter by status (e.g., `TODO`, `IN_PROGRESS`)
- `priority` (optional): Filter by priority (e.g., `HIGH`, `URGENT`)
- `assigneeId` (optional): Filter by assignee
- `search` (optional): Search in title and description
- `page` (optional, default: 1): Page number
- `limit` (optional, default: 50, max: 100): Items per page
- `sortBy` (optional, default: `createdAt`): Sort field
- `sortOrder` (optional, default: `desc`): Sort direction (`asc` or `desc`)

**Response**: `200 OK`
```json
{
  "data": [
    {
      "id": "uuid",
      "title": "string",
      ... (task objects)
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 123,
    "totalPages": 3
  }
}
```

**Example**:
```bash
# Get high-priority tasks in progress
curl "https://api.taskflow.com/api/v1/projects/550e8400-e29b-41d4-a716-446655440000/tasks?status=IN_PROGRESS&priority=HIGH&sortBy=dueDate&sortOrder=asc" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**Error Responses**:
- `401 Unauthorized`: Missing or invalid token
- `403 Forbidden`: No permission to view project
- `404 Not Found`: Project not found

---

### Delete Task

Delete a task permanently.

**Endpoint**: `DELETE /tasks/:id`

**Response**: `204 No Content`

**Example**:
```bash
curl -X DELETE https://api.taskflow.com/api/v1/tasks/550e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**Error Responses**:
- `401 Unauthorized`: Missing or invalid token
- `403 Forbidden`: No permission to delete task
- `404 Not Found`: Task not found

---

### Get My Tasks

Get all tasks assigned to the authenticated user.

**Endpoint**: `GET /tasks/me`

**Query Parameters**:
- `status` (optional): Filter by status
- `priority` (optional): Filter by priority
- `projectId` (optional): Filter by project
- `page` (optional): Page number
- `limit` (optional): Items per page

**Response**: `200 OK`
```json
{
  "data": [
    {
      "id": "uuid",
      "title": "string",
      "status": "enum",
      "priority": "enum",
      "dueDate": "ISO 8601",
      "project": {
        "id": "uuid",
        "name": "string"
      }
    }
  ],
  "pagination": { ... }
}
```

**Example**:
```bash
curl "https://api.taskflow.com/api/v1/tasks/me?status=IN_PROGRESS" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

---

## Real-Time Updates

Tasks support real-time updates via WebSocket. Connect to Socket.io and join project rooms to receive live updates.

**Events**:
- `task:created` - New task created
- `task:updated` - Task updated
- `task:deleted` - Task deleted
- `task:assigned` - Task assigned to user
- `task:commented` - New comment added

**Example** (JavaScript):
```javascript
import io from 'socket.io-client';

const socket = io('https://api.taskflow.com', {
  auth: {
    token: 'your_jwt_token'
  }
});

// Join project room
socket.emit('project:join', { projectId: '550e8400-...' });

// Listen for task updates
socket.on('task:updated', (task) => {
  console.log('Task updated:', task);
  // Update UI
});
```

## Rate Limits

- **Authenticated**: 1000 requests per hour per user
- **Unauthenticated**: 100 requests per hour per IP

Rate limit headers:
```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1623456789
```

## Error Codes

| Code | Message | Description |
|------|---------|-------------|
| 400 | Bad Request | Invalid input data |
| 401 | Unauthorized | Missing or invalid authentication |
| 403 | Forbidden | Insufficient permissions |
| 404 | Not Found | Resource doesn't exist |
| 409 | Conflict | Resource conflict (e.g., duplicate) |
| 422 | Unprocessable Entity | Validation error |
| 429 | Too Many Requests | Rate limit exceeded |
| 500 | Internal Server Error | Server error |

**Error Response Format**:
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Title is required",
    "details": [
      {
        "field": "title",
        "message": "Title must be at least 1 character"
      }
    ]
  }
}
```

## Webhooks

Subscribe to task events via webhooks. Configure in team settings.

**Events**: `task.created`, `task.updated`, `task.deleted`, `task.assigned`

**Payload**:
```json
{
  "event": "task.updated",
  "timestamp": "ISO 8601",
  "data": {
    "task": { ... },
    "changes": {
      "status": { "old": "TODO", "new": "IN_PROGRESS" }
    },
    "actor": {
      "id": "uuid",
      "name": "string"
    }
  }
}
```

---

*Generated by AI as part of the TaskFlow project*
